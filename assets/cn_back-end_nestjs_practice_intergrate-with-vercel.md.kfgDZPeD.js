import{_ as s,o as i,c as a,R as n}from"./chunks/framework.-x8vlqC6.js";const F=JSON.parse('{"title":"nestjs 与 vercel 集成","description":"","frontmatter":{},"headers":[],"relativePath":"cn/back-end/nestjs/practice/intergrate-with-vercel.md","filePath":"cn/back-end/nestjs/practice/intergrate-with-vercel.md","lastUpdated":1703559387000}'),e={name:"cn/back-end/nestjs/practice/intergrate-with-vercel.md"},t=n(`<h1 id="nestjs-与-vercel-集成" tabindex="-1">nestjs 与 vercel 集成 <a class="header-anchor" href="#nestjs-与-vercel-集成" aria-label="Permalink to &quot;nestjs 与 vercel 集成&quot;">​</a></h1><blockquote><p>注意，访问 vercel 官网需要科学上网</p></blockquote><p>本文主要介绍以下几个内容：</p><ul><li>创建 nestjs 项目，本地跑通</li><li>上传 nestjs 项目到 github 仓库</li><li>创建 vercel 项目并导入那个仓库</li><li>为部署好的 vercel 项目添加国内域名访问</li></ul><h2 id="创建-nestjs-项目" tabindex="-1">创建 nestjs 项目 <a class="header-anchor" href="#创建-nestjs-项目" aria-label="Permalink to &quot;创建 nestjs 项目&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @nestjs/cli</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 不想全局安装 nestjs 脚手架 也可以使用 npx nest new intergrate-with-vercel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> intergrate-with-vercel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 根据控制台提示，选择包管理工具安装依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> intergrate-with-vercel</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start:dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>访问 <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a></p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p1.jpg" alt="img"></p><h2 id="创建-github-仓库" tabindex="-1">创建 github 仓库 <a class="header-anchor" href="#创建-github-仓库" aria-label="Permalink to &quot;创建 github 仓库&quot;">​</a></h2><p>在 github 上创建一个仓库，将本地项目传到仓库</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;feat: project init&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 切换主分支名为main，我曾经问过GPT为什么github要改主分支名为main</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [你的仓库地址]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>添加 vercel 项目配置文件 vercel.json 在根目录，<a href="https://vercel.com/docs/projects/project-configuration" target="_blank" rel="noreferrer">参考</a>。</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;builds&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/main.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;use&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@vercel/node&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;routes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/(.*)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;dest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/main.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;methods&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PUT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DELETE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;chore: add vercel.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为什么 github 要改主分支名为【GPT】</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p2.png" alt="img"></p><h2 id="创建-vercel-项目并导入仓库" tabindex="-1">创建 vercel 项目并导入仓库 <a class="header-anchor" href="#创建-vercel-项目并导入仓库" aria-label="Permalink to &quot;创建 vercel 项目并导入仓库&quot;">​</a></h2><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p3.jpg" alt="img"></p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p4.jpg" alt="img"></p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p5.jpg" alt="img"></p><p>看到这个表示部署成功了。</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p6.jpg" alt="img"></p><p>访问以下试试 😀</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p7.png" alt="img"></p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p8.jpg" alt="img"></p><h2 id="让国内能访问" tabindex="-1">让国内能访问 <a class="header-anchor" href="#让国内能访问" aria-label="Permalink to &quot;让国内能访问&quot;">​</a></h2><p>先决条件，你需要有自己的域名。我的域名是在阿里买的。</p><p>打开刚才那个项目的 vercel 设置，选 <code>Domains</code>。</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p9.jpg" alt="img"></p><p>添加一个域名</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p10.jpg" alt="img"></p><p>添加后会提示配置错误，这是因为还没有在域名提供商那做解析。看图中提示，是要在提供商那里添加一条 CNAME 的记录。</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p11.jpg" alt="img"></p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p12.jpg" alt="img"></p><p>提供商那里设置好以后，会看到在 vercel 项目设置里域名设置成功。</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p13.jpg" alt="img"></p><p>访问一下自己的域名，看到返回 hello world 表示成功。</p><p><img src="https://bucket.edgexie.top/for-blog/nestjs/p14.jpg" alt="img"></p><h2 id="资源" tabindex="-1">资源 <a class="header-anchor" href="#资源" aria-label="Permalink to &quot;资源&quot;">​</a></h2><ul><li>nestjs 项目，<a href="https://github.com/edgexie/intergrate-with-vercel" target="_blank" rel="noreferrer">地址</a></li><li>最终访问地址，<a href="https://intergrate-with-vercel.edgexie.top/" target="_blank" rel="noreferrer">https://intergrate-with-vercel.edgexie.top/</a></li><li>vercel.json 设置参考，<a href="https://vercel.com/docs/projects/project-configuration" target="_blank" rel="noreferrer">地址</a></li><li>这边文章同样发表在我的<a href="./.html">博客</a>上了</li></ul>`,40),l=[t];function p(h,r,k,g,c,d){return i(),a("div",null,l)}const u=s(e,[["render",p]]);export{F as __pageData,u as default};
